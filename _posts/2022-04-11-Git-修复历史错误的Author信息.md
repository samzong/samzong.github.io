---
layout: post
title: Git ä¿®å¤å†å²é”™è¯¯çš„ Author ä¿¡æ¯
toc: true
author: samzong.lu
author_id: defaultAuthorId
language: zh
abbrlink: 5023
tags:
  - Git
categories:
  - Git
date: 2022-04-11 08:19:00
---

## git author çš„ä½œç”¨

ä¸€èˆ¬æƒ…å†µä¸‹ git ä»“åº“ï¼Œéƒ½æ˜¯é€šè¿‡ author ä¸­çš„ `user.email` çš„åˆ¤å®šæäº¤è€…çš„èº«ä»½ï¼›è€Œè¿™ä¸ªé…ç½®ä¸€èˆ¬åœ¨æ–°ç”µè„‘ä¸Šéœ€è¦åˆå§‹åŒ–é…ç½®ï¼Œå¦åˆ™è¿˜æ˜¯å®¹æ˜“å‡ºé”™ã€‚

- ä¸ªäººè½¯ä»¶ä»“åº“ä½¿ç”¨äº†å…¬å¸çš„ author ä¿¡æ¯ [ä¿¡æ¯æ³„æ¼çš„é£é™©]
- å’Œå…¶ä»–å¼€å‘è€…ä½¿ç”¨äº†ç›¸åŒçš„ author ä¿¡æ¯ [å½±å“commitè¿½è¸ª]


## âœ… ä¿®æ”¹ä¸ºæ­£ç¡®çš„ author ä¿¡æ¯

> æ³¨æ„ä¿®æ”¹å…¨å±€éœ€è¦å¢åŠ  `--global` å‚æ•°

```bash
// ä¿®æ”¹ç³»ç»Ÿé»˜è®¤ï¼ˆå½±å“å…¨éƒ¨é¡¹ç›®ï¼‰è°¨æ…ä½¿ç”¨
git config --global user.name "samzong"
git config --global user.email "samzong.lu@gmail.com"

// ä¿®æ”¹å•ä¸ªé¡¹ç›®
git config user.name "samzong"
git config user.email "samzong.lu@gmail.com"
```

ä½†æ˜¯ï¼Œé€šè¿‡ä»¥ä¸Šçš„å˜æ›´åï¼Œä»…å¯¹åç»­çš„æ“ä½œç”Ÿæ•ˆï¼›æ‰€ä»¥è¿™æ ·å¯ä»¥å¸®åŠ©ä½ å›åˆ°æ­£ç¡®çš„è½¨é“ä¸Šï¼Œä½†æ— æ³•è§£å†³å†å²é—ç•™çš„é”™è¯¯é—®é¢˜ï¼

ä¸‹é¢æˆ‘å°†æ¼”ç¤ºå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜

## ä¿®è®¢æœ€è¿‘ä¸€æ¬¡æäº¤ (--amend)

`git commit` æä¾›äº† --amend çš„å‚æ•°ï¼Œä½œç”¨æ˜¯å¯¹commitè¿›è¡Œä¿®æ­£ï¼Œå¦‚æœä½ æ˜¯æœ€è¿‘ä¸€æ¬¡æäº¤å‡ºé”™ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹æ–¹å‘½ä»¤å®Œæˆè¡¥æ•‘ã€‚

```bash
# ğŸ“¢ æ³¨æ„æ›¿æ¢ user.name & user.email ä¸ºæ­£ç¡®çš„é€‰é¡¹
git commit --amend --author="{user.name} <{user.email}>"
```

ä»¥ä¸Šå˜æ›´å®Œæˆåï¼Œä½ ä¼šå‘ç°æœ€è¿‘ä¸€æ¬¡çš„æäº¤è¢«ä¿®æ­£æˆåŠŸäº†ï¼Œå¯ä»¥ä½¿ç”¨ `git log -1` æ¥å¯¹æ¯”å‰åçš„ author ä¿¡æ¯çš„å˜æ›´ï¼›ç¡®è®¤æ— è¯¯åï¼Œå°†ä½ çš„ä¿®æ”¹æ¨é€åˆ°ç›®æ ‡ä»“åº“ä¸­å³å¯ï¼›

> å¦‚æœä¿®æ”¹åçš„ç»“æœä¸æ»¡æ„ï¼Œæ˜¯å¯ä»¥å†æ¬¡ä¿®è®¢


## ä¿®æ”¹æ›´æ—©ä¹‹å‰çš„æäº¤ (è°¨æ…ä½¿ç”¨)

å†™åœ¨å‰é¢çš„è¯ï¼Œå¦‚æœä½ çŸ¥é“rebaseçš„ä½œç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨çš„åŒæ—¶è®°ä½ï¼Œå¯ä»¥åœ¨ä»»ä½•è¿‡ç¨‹ä¸­ç»ˆæ­¢ä½ çš„æ“ä½œï¼Œè¿™éå¸¸é‡è¦ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤

```bashe
git rebase --abort
```

å¦‚æœéœ€è¦ä¿®æ”¹æ›´æ—©ä¹‹å‰çš„æäº¤ï¼Œé‚£å°±éœ€è¦ç»“åˆ `git rebase` çš„èƒ½åŠ›ï¼Œæ¥å®ç°äº†

> rebase æ˜¯ä¸ªå±é™©çš„æ“ä½œï¼Œå…¶äº§ç”Ÿçš„é£é™©ä¹Ÿå°±æ˜¯ç›®å‰æˆ‘ä»¬è¦åšçš„ä¿®æ”¹å†å²ï¼›**ä»…å»ºè®®åœ¨æµ‹è¯•é¡¹ç›®æˆ–è€…ä¸ªäººé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œæ¶‰åŠåˆ°å¤šäººåä½œçš„å¼€æºã€å•†ä¸šåŒ–é¡¹ç›®è°¨æ…ä½¿ç”¨**

```bash
## ä½¿ç”¨ git log æ‰¾åˆ°ä½ æƒ³è¦ä¿®æ”¹çš„æäº¤
git log
```

```bash
commit 145a3eb180c3f45fd99c2d61cad6439177cbc319
Author: samzong.lu <samzong.lu@gmail.com>
Date:   Sun Mar 20 22:22:58 2022 +0800

commit 7e04c7ebaf06b2eea1951a29b79a571090cd1d8b  {commit_id}
Author: samzong.lu <samzong.lu@gmail.com>
Date:   Sun Mar 20 22:19:48 2022 +0800
```

æ‰¾åˆ°ä½ æƒ³è¦æ›´æ–°çš„commit_id, ç„¶åä½¿ç”¨rebase å‘½ä»¤æ¥è¿›è¡Œå¤„ç†

```bash
git rebase -i {commit_id}
```

ç„¶åç»§ç»­ä½¿ç”¨ `git commit --amend` æ¥ä¿®æ”¹ author ä¿¡æ¯ï¼Œå¯ä»¥å¢åŠ  --no-edit æ¥ææ•ˆï¼Œè¡¨ç¤ºæ— éœ€å¼¹å‡ºä¿®æ”¹ commit info çš„çª—å£

```bash
git commit --amend --author="{user.name} <{user.email}>"
```

æœ€åä½¿ç”¨ `git rebase --coutine` ç»§ç»­å®Œæˆå‰©ä½™çš„æäº¤


## æ›´é«˜çº§åšæ³• `filter-branch`

`filter-branch` è™½ç„¶è¢«å®˜æ–¹æ¨èï¼Œä½†ä¹Ÿä¸æ˜¯å¯ä»¥è½»æ˜“ä½¿ç”¨çš„å·¥å…·ï¼›æœ¬æ¬¡çš„ç›®çš„åªæ˜¯ä¿®æ”¹ author ä¸­é‚®ç®±ï¼Œæ‰€ä»¥ä¸€å®šè¦åŠ ä¸Š `--commit-filter`ï¼Œå®˜æ–¹çš„è„šæœ¬å®ä¾‹æˆ‘ç›´æ¥copyåœ¨ä¸‹æ–¹äº†

```bash
git filter-branch --commit-filter '
        if [ "$GIT_AUTHOR_EMAIL" = "schacon@localhost" ];
        then
                GIT_AUTHOR_NAME="Scott Chacon";
                GIT_AUTHOR_EMAIL="schacon@example.com";
                git commit-tree "$@";
        else
                git commit-tree "$@";
        fi' HEAD
```

## push åˆ° repo çš„æ³¨æ„äº‹é¡¹

æ³¨æ„ä»¥ä¸Šçš„æ¶ˆæ¯ä¼šå¯¼è‡´æäº¤åŒ…å«äº† â€œå®ƒä»¬çˆ¶æäº¤çš„SHA-1æ ¡éªŒâ€ å’Œ â€œè¿™ä¸ªå‘½ä»¤ä¿®æ”¹å†å²ä¸­çš„æ¯ä¸€ä¸ªæäº¤çš„SHA-1æ ¡éªŒâ€ï¼Œ å†åŠ ä¸Šä¿®æ”¹åçš„ author ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨pushæ—¶ä¼šé‡åˆ°è­¦å‘Šï¼Œå¯ä»¥ä½¿ç”¨ä¸‹æ–¹å‘½ä»¤å¼ºåˆ¶æäº¤

```bash
git push --force origin {branch_name}
```

åœ¨å¤šäººåä½œçš„åœºæ™¯å¯èƒ½ä¼šå‡ºç°è¦†ç›–ä»–äººä»£ç çš„æƒ…å†µï¼Œè¯·æ³¨æ„åå•†å¹¶ fetch åˆ†æ”¯çš„å˜æ›´ï¼Œç¡®ä¿æœ€æ–°çŠ¶æ€








